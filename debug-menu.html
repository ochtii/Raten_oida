<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Debug Test</title>
    <link rel="stylesheet" href="./assets/css/themes.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/layout.css">
    <link rel="stylesheet" href="./assets/css/components.css">
    <style>
        body { margin: 0; }
        .debug-panel {
            position: fixed;
            bottom: 0;
            right: 0;
            width: 300px;
            height: 200px;
            background: #000;
            color: #0f0;
            font-family: monospace;
            font-size: 11px;
            overflow-y: auto;
            z-index: 9999;
            border-left: 2px solid #0f0;
        }
        .debug-panel h3 { margin: 5px; }
        .debug-log { margin-left: 5px; line-height: 1.3; }
        .debug-log div { white-space: nowrap; }
    </style>
</head>
<body data-theme="dark">
    <div id="app">
        <header id="app-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-text">RATEN<span class="highlight">OIDA</span></span>
                </div>
                <button id="sandwich-btn" class="sandwich-btn" aria-label="MenÃ¼ Ã¶ffnen">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </header>

        <div id="nav-overlay" class="nav-overlay"></div>

        <nav id="sandwich-menu" class="sandwich-menu">
            <div class="sandwich-content">
                <button class="close-btn" id="close-sandwich">&times;</button>
                <ul class="menu-list">
                    <li><a href="#" data-route="home" class="menu-link">ğŸ  Home</a></li>
                    <li><a href="#" data-route="game-select" class="menu-link">ğŸ® Spiele</a></li>
                    <li><a href="#" data-route="stats" class="menu-link">ğŸ“Š Statistiken</a></li>
                    <li><a href="#" data-route="help" class="menu-link">â“ Hilfe</a></li>
                    <li><a href="#" data-route="settings" class="menu-link">âš™ï¸ Einstellungen</a></li>
                </ul>
            </div>
        </nav>

        <div id="app-content">
            <h1>Menu Debug Test</h1>
            <p>Ã–ffne das MenÃ¼ und klicke auf Links. Die Debug-Konsole zeigt alle Events.</p>
            <p style="color: #888;">Siehe rechts unten fÃ¼r Debug-Ausgabe.</p>
        </div>
    </div>

    <div class="debug-panel">
        <h3>ğŸ› DEBUG</h3>
        <div class="debug-log" id="debug-log"></div>
    </div>

    <script>
        const debugLog = document.getElementById('debug-log');
        
        function log(msg) {
            const div = document.createElement('div');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            debugLog.appendChild(div);
            debugLog.scrollTop = debugLog.scrollHeight;
            // Keep only last 30 lines
            while (debugLog.children.length > 30) {
                debugLog.removeChild(debugLog.firstChild);
            }
        }

        // Test 1: Click on sandwich button
        const sandwichBtn = document.getElementById('sandwich-btn');
        const sandwichMenu = document.getElementById('sandwich-menu');
        
        log('PAGE LOADED âœ“');
        log(`sandwich-btn found: ${!!sandwichBtn}`);
        log(`sandwich-menu found: ${!!sandwichMenu}`);

        sandwichBtn?.addEventListener('click', (e) => {
            log('ğŸ“ sandwich-btn clicked');
            const hasOpen = sandwichMenu?.classList.contains('open');
            log(`  menu.open status: ${hasOpen}`);
            
            // Toggle
            sandwichMenu?.classList.toggle('open');
            const newOpen = sandwichMenu?.classList.contains('open');
            log(`  menu.open after toggle: ${newOpen}`);
        });

        // Test 2: Click on menu links
        document.querySelectorAll('[data-route]').forEach((link, i) => {
            log(`Found [data-route="${link.getAttribute('data-route')}"] #${i+1}`);
            
            link.addEventListener('click', (e) => {
                log(`ğŸ“ [data-route="${link.getAttribute('data-route')}"] clicked`);
                e.preventDefault?.();
            });
        });

        // Test 3: Global click listener like router.js
        document.addEventListener('click', (e) => {
            const target = e.target.closest('[data-route]');
            if (target) {
                const route = target.getAttribute('data-route');
                log(`ğŸ”— Global [data-route] handler: ${route}`);
                e.preventDefault?.();
                
                // Close menu
                if (sandwichMenu?.classList.contains('open')) {
                    log(`  Closing menu...`);
                    sandwichMenu?.classList.remove('open');
                }
            }
        });

        // Test 4: Check CSS
        const style = window.getComputedStyle(sandwichMenu);
        log(`menu display: ${style.display}`);
        log(`menu position: ${style.position}`);
        log(`menu transform: ${style.transform}`);
    </script>
</body>
</html>
